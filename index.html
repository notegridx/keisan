<!doctype html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CALC / ケイサン</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=Rajdhani:wght@400;600;700&family=Share+Tech+Mono&display=swap"
    rel="stylesheet">

  <link rel="stylesheet" href="./assets/css/style.css" />
</head>

<body>
  <div class="noise" aria-hidden="true"></div>

  <div id="helpModal" class="modal" hidden>
    <div class="modal__backdrop" data-close="true" aria-hidden="true"></div>

    <div class="modal__panel" role="dialog" aria-modal="true" aria-labelledby="helpTitle">
      <div class="modal__head">
        <div id="helpTitle" class="modal__title">HOW TO PLAY</div>
        <button id="helpClose" class="modal__close" type="button" aria-label="閉じる">×</button>
      </div>

      <div class="modal__body">

        <div class="helpSection">
          <div class="helpLang">EN</div>
          <ul class="helpList">
            <li><strong>Type the answer</strong> and press <strong>Enter</strong> or <strong>CHECK</strong>.</li>
            <li><strong>Correct answers</strong> increase your score and <strong>build the beat</strong>.</li>
            <li><strong>Wrong answers</strong> reset the beat back to <strong>KICK</strong>.</li>
            <li>Keep winning to unlock <strong>new drum sounds</strong>.</li>
            <li>Every stage clear, the <strong>difficulty increases</strong>.</li>
            <li>Control the sound with <strong>BGM</strong> and <strong>SFX</strong> buttons.</li>
          </ul>
        </div>

        <div class="helpSection">
          <div class="helpLang">JP</div>
          <ul class="helpList">
            <li>答えを入力して <strong>Enter</strong> または <strong>CHECK</strong>。</li>
            <li>正解するとスコアが増え、<strong>ビートが成長</strong>します。</li>
            <li>間違えるとビートは <strong>KICK</strong> からやり直し。</li>
            <li>正解を重ねるほど、<strong>ドラム音が追加</strong>されます。</li>
            <li>ステージクリアごとに <strong>難易度が上昇</strong>します。</li>
            <li><strong>BGM</strong> と <strong>SFX</strong> はボタンで切り替えます。</li>
          </ul>
        </div>

        <div class="helpNote">
          Click outside or press Esc to close.<br>
          画面外クリック、または Esc キーで閉じます。
        </div>

      </div>
    </div>
  </div>

  <div class="container">
    <div class="topbar" aria-label="topbar">
      <div class="brand"><span class="glow">CALC</span> / ケイサン</div>
      <div class="stats" aria-label="stats">
        <div class="pill">SCORE <strong><span id="correctTotal" class="score-value">0</span></strong></div>
        <div class="pill">DRM <strong id="drumLevelLabel">KICK</strong></div>
        <button id="helpBtn" class="helpBtn" type="button" aria-haspopup="dialog" aria-controls="helpModal"
          aria-label="ヘルプ">
          ⓘ
        </button>
      </div>
    </div>

    <div class="center" aria-label="center">
      <div class="formula" id="formula" aria-label="problem">
        <span id="a">10</span>
        <span id="op">−</span>
        <span id="b">5</span>
        <span>=</span>
        <!-- <input id="answer" inputmode="numeric" autocomplete="off" aria-label="answer" /> -->
         <form id="answerForm" autocomplete="off">
  <input
    id="answer"
    inputmode="numeric"
    autocomplete="off"
    aria-label="answer"
    enterkeyhint="done"
  />
</form>

      </div>
    </div>

    <div class="controls" aria-label="controls">
      <button id="check" type="button" class="primary">CHECK</button>
      <button id="reset" type="button">RST</button>
      <button id="drumToggle" type="button">BGM ON</button>
      <button id="soundToggle" type="button">SFX ON</button>
    </div>

    <div id="msg" aria-live="polite"></div>

    <audio id="correctSound" src="./assets/audio/correct.mp3" preload="auto"></audio>
    <audio id="wrongSound" src="./assets/audio/wrong.mp3" preload="auto"></audio>
    <audio id="bgmSwitchSound" src="./assets/audio/bgm_switch.mp3" preload="auto"></audio>
    <audio id="stageClearSound" src="./assets/audio/stage_clear.mp3" preload="auto"></audio>
  </div>

<footer class="footer">
  <div class="footer-inner">
    <span class="footer-title">CALC / ケイサン</span>
    <span class="footer-sep">·</span>
    <a
      href="https://github.com/notegridx/keisan"
      target="_blank"
      rel="noopener noreferrer"
    >
      GitHub: notegridx/keisan
    </a>
    <span class="footer-sep">·</span>
    <span class="footer-copy">© 2026 notegridx</span>
  </div>
</footer>


  <script src="./assets/js/app.js" defer></script>
</body>

</html>